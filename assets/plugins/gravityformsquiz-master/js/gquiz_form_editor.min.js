function QuizChoice(a,b,c,d){this.text=a,this.value=b?b:a,this.isSelected=!1,this.price="",this.gquizIsCorrect=c,this.gquizWeight=d}function StartChangeQuizType(a){var b=GetSelectedField();return b.gquizFieldType=a,jQuery.each(b.choices,function(a){b.choices[a].gquizIsCorrect=!1,b.choices[a].gquizWeight=0}),StartChangeInputType(a,b)}function GenerateQuizChoiceValue(a){return"gquiz"+a.id+"xxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function gquiz_toggle_correct_choice(a,b){var c=GetSelectedField();if("radio"==c.inputType||"select"==c.inputType){for(var d=0;d<c.choices.length;d++)c.choices[d].gquizIsCorrect&&(c.choices[d].gquizIsCorrect=!1);jQuery("img.gquiz-button-correct-choice").each(function(a){this.src=this.src.replace("correct1.png","correct0.png")}),c.choices[b].gquizIsCorrect=!0,a.src=a.src.replace("correct0.png","correct1.png")}else if("checkbox"==c.inputType){var e=a.src.indexOf("correct1.png")>=0;e?(a.src=a.src.replace("correct1.png","correct0.png"),jQuery(a).attr("title",gquiz_strings.defineAsCorrect).attr("alt","Not correct")):(a.src=a.src.replace("correct0.png","correct1.png"),jQuery(a).attr("title",gquiz_strings.defineAsIncorrect).attr("alt","Correct"));var f=c.choices[b].gquizIsCorrect;c.choices[b].gquizIsCorrect=!f}UpdateFieldChoices(GetInputType(c)),gquiz_maybe_display_choices_help(c)}function gquizToggleValues(){jQuery("#gquiz_gfield_settings_choices_container").toggleClass("gquiz-choice-values-visible")}function gquiz_maybe_display_choices_help(a){for(var b=!0,c=0;c<a.choices.length;c++)a.choices[c].gquizIsCorrect&&(b=!1);b?jQuery(".gquiz-choices-help").fadeIn():jQuery(".gquiz-choices-help").fadeOut()}function gquizGetChoices(a){var b,c,d,e=gquizVars.imagesUrl,f="";d=a.gquizWeightedScoreEnabled?"":"style='display:none'";for(var g=0;g<a.choices.length;g++)b=1==a.choices[g].gquizIsCorrect?"/correct1.png":"/correct0.png",f+="<li class='gquiz-choice-row' data-index='"+g+"'>",f+="<i class='fa fa-sort gquiz-choice-handle'></i> ",f+="<input type='text' id='gquiz-choice-text-"+g+"' value=\""+a.choices[g].text.replace(/"/g,"&quot;")+"\"  class='field-choice-input field-choice-text' />",f+="<input type='text' id='gquiz-choice-value-"+g+"' value=\""+a.choices[g].value+"\" class='field-choice-input field-choice-value' >","undefined"==typeof a.choices[g].gquizWeight&&(a.choices[g].gquizWeight=1==a.choices[g].gquizIsCorrect?1:0),c=a.choices[g].gquizWeight,f+="<input id='gquiz-choice-weight-"+g+"' type='text' class='gquiz-choice-weight' onkeyup='gquizSetFieldChoice("+g+");' value='"+c+"' "+d+"/> ",f+="<img src='"+e+b+"' class='gquiz-button-correct-choice' title='"+gquiz_strings.toggleCorrectIncorrect+"' onclick=\"gquiz_toggle_correct_choice(this, '"+g+"');\"/> ",f+="<a class='gf_insert_field_choice gquiz-insert-choice'><i class='fa fa-plus-square'></i></a>",a.choices.length>1&&(f+="<a class='gf_delete_field_choice gquiz-delete-choice'><i class='fa fa-minus-square'></i></a>"),f+="</li>";return f+='<div class="gquiz-choices-help" style="display:none">'+gquiz_strings.markAnAnswerAsCorrect+"</div>"}function gquizSetFieldChoice(a){var b=jQuery("#gquiz-choice-text-"+a).val(),c=jQuery("#gquiz-choice-value-"+a).val(),d=jQuery("#gquiz-choice-weight-"+a).val(),e=GetSelectedField();e.choices[a].text=b,e.choices[a].value=e.enableChoiceValue?c:b,e.choices[a].gquizWeight=d,jQuery("#field_choices :radio, #field_choices :checkbox").each(function(a){e.choices[a].isSelected=this.checked}),LoadBulkChoices(e),UpdateFieldChoices(GetInputType(e))}function gquizInsertChoice(a){var b=GetSelectedField(),c=new QuizChoice("",GenerateQuizChoiceValue(b),!1,0);b.choices.splice(a,0,c),gquizLoadChoices(),UpdateFieldChoices(GetInputType(b))}function gquizDeleteChoice(a){var b=GetSelectedField(),c=jQuery("#gquiz-choice-value-"+a).val();(!HasConditionalLogicDependency(b.id,c)||confirm(gf_vars.conditionalLogicDependencyChoice))&&(b.choices.splice(a,1),gquizLoadChoices(),UpdateFieldChoices(GetInputType(b)))}function gquizLoadChoices(){jQuery("#gquiz-field-choices").html(gquizGetChoices(field)),gquiz_maybe_display_choices_help(field)}function gform_new_choice_quiz(a,b){return"quiz"==a.type&&(b.value=GenerateQuizChoiceValue(a),b.gquizIsCorrect=!1,b.gquizWeight=0),b}function gquiz_toggle_answer_explanation(a){a?jQuery(".gquiz-setting-answer-explanation").show("slow"):jQuery(".gquiz-setting-answer-explanation").hide("slow")}function gquizMoveFieldChoice(a,b){var c=GetSelectedField(),d=c.choices[a];c.choices.splice(a,1),c.choices.splice(b,0,d),gquizLoadChoices(),UpdateFieldChoices(GetInputType(c))}function SetDefaultValues_quiz(a){return a.gquizFieldType="radio",a.label="Untitled Quiz Field",a.inputType="radio",a.inputs=null,a.enableChoiceValue=!0,a.enablePrice=!1,a.gquizEnableRandomizeQuizChoices=!1,a.gquizShowAnswerExplanation=!1,a.gquizAnswerExplanation="",a.gquizWeightedScoreEnabled=!1,a.choices||(a.choices=new Array(new QuizChoice(gquiz_strings.firstChoice,GenerateQuizChoiceValue(a),!1,0),new QuizChoice(gquiz_strings.secondChoice,GenerateQuizChoiceValue(a),!1,0),new QuizChoice(gquiz_strings.thirdChoice,GenerateQuizChoiceValue(a),!1,0))),a}jQuery(document).bind("gform_load_field_choices",function(a,b){"quiz"==b.type&&(jQuery("#gquiz-field-choices").html(gquizGetChoices(b)),gquiz_maybe_display_choices_help(b))}),jQuery(document).bind("gform_load_field_settings",function(a,b,c){if("quiz"==b.type){jQuery("#gquiz-randomize-quiz-choices").attr("checked",b.gquizEnableRandomizeQuizChoices?!0:!1),jQuery("#gquiz-field-type").val(b.gquizFieldType),jQuery("#gquiz-question").val(b.label),jQuery("#gquiz-answer-explanation").val(b.gquizAnswerExplanation),void 0==b.gquizShowAnswerExplanation&&(b.gquizShowAnswerExplanation=!1);var d=b.gquizShowAnswerExplanation;"undefined"==typeof b.gquizWeightedScoreEnabled&&(b.gquizWeightedScoreEnabled=!1),jQuery("#gquiz-weighted-score-enabled").prop("checked",b.gquizWeightedScoreEnabled),b.gquizWeightedScoreEnabled?jQuery("#gquiz_gfield_settings_choices_container").addClass("gquiz-weighted-score"):jQuery("#gquiz_gfield_settings_choices_container").removeClass("gquiz-weighted-score"),jQuery("#gquiz-show-answer-explanation").prop("checked",d),gquiz_toggle_answer_explanation(d),has_entry(b.id)?jQuery("#gquiz-field-type").attr("disabled",!0):jQuery("#gquiz-field-type").removeAttr("disabled")}}),jQuery(document).ready(function(){"undefined"!=typeof fieldSettings&&(fieldSettings.quiz=".gquiz-setting-field-type, .gquiz-setting-question, .gquiz-setting-choices, .gquiz-setting-show-answer-explanation,  .gquiz-setting-randomize-quiz-choices",jQuery("#gquiz-field-choices").sortable({axis:"y",handle:".gquiz-choice-handle",update:function(a,b){var c=b.item.data("index"),d=b.item.index();gquizMoveFieldChoice(c,d)}}),jQuery(".gquiz-setting-choices").on("input propertychange",".field-choice-input",function(a){var b=jQuery(this),c=b.closest("li.gquiz-choice-row"),d=c.data("index");gquizSetFieldChoice(d),(b.hasClass("field-choice-text")||b.hasClass("field-choice-value"))&&(CheckChoiceConditionalLogicDependency(this),a.stopPropagation())}).on("click",".gquiz-insert-choice",function(){var a=jQuery(this).closest("li.gquiz-choice-row").data("index");gquizInsertChoice(a+1)}).on("click",".gquiz-delete-choice",function(){var a=jQuery(this).closest("li.gquiz-choice-row").data("index");gquizDeleteChoice(a)}))});
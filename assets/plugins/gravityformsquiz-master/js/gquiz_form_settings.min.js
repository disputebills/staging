!function(a,b){function c(a){switch(a){case"none":b("#gquiz-grading-pass-fail-container").fadeOut("fast"),b("#gquiz-grading-letter-container").fadeOut("fast");break;case"passfail":b("#gquiz-grading-letter-container").fadeOut("fast"),b("#gquiz-grading-pass-fail-container").fadeIn("fast");break;case"letter":b("#gquiz-grading-pass-fail-container").fadeOut("fast"),b("#gquiz-grading-letter-container").fadeIn("fast")}}function d(a,b){this.text=a,this.value=b}function e(a,c){g();var d=h[a];h.splice(a,1),h.splice(c,0,d),b("div#gquiz-settings-grades-container ul#gquiz-grades").html(f())}function f(){for(var a=gquizVars.imagesUrl,b="",c=0;c<h.length;c++)b+="<li data-index='"+c+"'>",b+="<i class='fa fa-sort field-choice-handle gquiz-grade-handle' title='"+gquiz_strings.dragToReOrder+"'></i>",b+="<input type='text' id='gquiz-grade-text-"+c+"' value=\""+h[c].text.replace(/"/g,"&quot;")+"\"  class='gquiz-grade-input gquiz-grade-text' />",b+=" <span class='gquiz-greater-than-or-equal'>&gt;=</span> ",b+="<input type='text' id='gquiz-grade-value-"+c+"' value=\""+h[c].value+"\" class='gquiz-grade-input gquiz-grade-value' >",b+=" <span class='gquiz-percentage'>&#37;</span> ",b+="<img src='"+a+"/add.png' class='gquiz-add-grade' title='"+gquiz_strings.addAnotherGrade+"' alt='"+gquiz_strings.addAnotherGrade+"' style='cursor:pointer; margin:0 3px;' onclick=\"gquiz.insertGrade("+(c+1)+');" />',h.length>1&&(b+="<img src='"+a+"/remove.png' title='"+gquiz_strings.removeThisGrade+"' alt='"+gquiz_strings.removeThisGrade+"' class='gquiz-delete-grade' style='cursor:pointer;' onclick=\"gquiz.deleteGrade("+c+');" />'),b+="</li>";return b}function g(){b("ul#gquiz-grades li").each(function(a){var c=b(this),e=c.children("input.gquiz-grade-text").val(),f=c.children("input.gquiz-grade-value").val(),g=c.data("index"),i=new d(e,parseInt(f));h[parseInt(g)]=i})}var h={};a.init=function(){var a=b("#grades").val();h=b.parseJSON(a),b(".gquiz-grading").click(function(){c(this.value)});var d=b("input[name='_gaddon_setting_grading']:checked").val();c(d),b("#passfaildisplayconfirmation, #letterdisplayconfirmation").click(function(){b(this).parent().siblings(".gquiz-quiz-confirmation").toggle()});var i,j;i=b("#passfaildisplayconfirmation").prop("checked"),j=b("#letterdisplayconfirmation").prop("checked"),passfaildisplayconfirmation?b("#gquiz-grading-pass-fail-container .gquiz-quiz-confirmation").show():b("#gquiz-grading-pass-fail-container .gquiz-quiz-confirmation").hide(),j?b("#gquiz-grading-letter-container .gquiz-quiz-confirmation").show():b("#gquiz-grading-letter-container .gquiz-quiz-confirmation").hide(),c(),b("#gquiz-grades").html(f()),b(document).on("blur","input.gquiz-grade-value",function(){var a=b(this),c=a.val();0>c||isNaN(c)?a.val(0):c>100&&a.val(100)}),b(document).on("keypress","input.gquiz-grade-value",function(a){return 27==a.which?(this.blur(),!1):0===a.which||8===a.which?!0:void((a.which<48||a.which>57)&&a.preventDefault())}),b("#gquiz-grades").sortable({axis:"y",handle:".gquiz-grade-handle",update:function(a,b){var c=b.item.data("index"),d=b.item.index();e(c,d)}}),b("#gform-settings").submit(function(){g(),b("#grades").val(b.toJSON(h))})},a.insertGrade=function(a){g();var c,e=h[a-1],i=h[a];c="undefined"==typeof i?0:i.value;var j=parseInt(c)+parseInt((e.value-c)/2),k=new d("",j);h.splice(a,0,k),b("div#gquiz-settings-grades-container ul#gquiz-grades").html(f())},a.deleteGrade=function(a){g(),h.splice(a,1),b("div#gquiz-settings-grades-container ul#gquiz-grades").html(f())},String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}}(window.gquiz=window.gquiz||{},jQuery),jQuery(document).ready(function(){gquiz.init()}),jQuery(document).ready(function(){"undefined"==typeof form});
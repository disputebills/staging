function gfRepeater_getRepeaters(){var e=jQuery(".gform_wrapper").each(function(){var e,r,t={},a=this.id.split("_")[2],i=jQuery(this).children("form").first(),n=0,p=0,o=0,u=0,s=null,d={},l={},f={},c={};return"/ajax-test"==jQuery(i).attr("action")&&jQuery(i).removeAttr("action"),jQuery(this).find(".gfield").each(function(){if(0==p)jQuery(this).has(".ginput_container_repeater").length&&(n+=1,gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+n+" - Start: "+jQuery(this).attr("id")),r=jQuery(this),e=r.find(".gform_repeater"),d=jQuery(e).val(),d&&(d=JSON.parse(d)),jQuery.captures()&&(c=jQuery.captures(e.attr("name")),c&&(c=JSON.parse(c),1==n&&c.formId==a&&(gfRepeater_submitted=!0))),1==n&&jQuery(i).capture(),p=1);else{if(jQuery(this).has(".ginput_container_repeater").length)return!1;if(jQuery(this).has(".ginput_container_repeater-end").length){gfRepeater_debug&&(console.log("Form #"+a+" - Repeater #"+n+" - End: "+jQuery(this).attr("id")),console.log("Form #"+a+" - Repeater #"+n+" - Children Found: "+o));var g={},_=jQuery(this),h=_.find(".gf_repeater_add"),R=_.find(".gf_repeater_remove"),y="gfRepeater_repeatRepeater("+a+","+n+");",m="gfRepeater_unrepeatRepeater("+a+","+n+");";jQuery(h).attr({onclick:y,onkeypress:y}),jQuery(R).attr({onclick:m,onkeypress:m}),g={add:h,remove:R,data:e,start:r,end:_};var v={},j=Number(d.start),Q=Number(d.min),C=Number(d.max);(!j||C&&j>C)&&(j=1),(!Q||C&&Q>C)&&(Q=1),(!C||Q&&C&&Q>C)&&(C=null),v={start:j,min:Q,max:C};var b={},k=Number(e.attr("tabindex")),I=null;gfRepeater_submitted&&c&&(I=c.repeatCount),b={repeatCount:1,prevRepeatCount:I,childrenCount:o,paremCount:u,tabIndex:k,inputData:f},t[n]={data:b,settings:v,controllers:g,children:l},p=0,o=0,u=0,s=null,l={},f={},repeaterChildrenPrePopulate={},repeaterRequiredChildren=null}else{o+=1;var x,w,A,L=jQuery(this),N=(jQuery(this).children(".gfield_label").text(),jQuery(this).attr("id")),V=N.split("_")[2],S={},D=[],P=0,F=!1,q=d.children[V],E=s;if(jQuery(this).has(".ginput_container").length){var T=jQuery(this).find(".ginput_container").attr("class").split(/\s+/),O="ginput_container_";jQuery.each(T,function(e,r){r.slice(0,O.length)==O&&(x=r.slice(O.length,r.length))})}else jQuery(this).hasClass("gform_hidden")?x="hidden":jQuery(this).hasClass("gsection")&&(x="section");"section"==x&&(s=o,E=null),q.required&&(F=!0),q.inputMask&&(w=q.inputMask),q.conditionalLogic&&(A=q.conditionalLogic,A.skip=[]),gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+n+" - Child #"+o+" - Found: "+N),jQuery(this).find(":input").each(function(){P+=1;var e,r=jQuery(this),t=jQuery(this).attr("id"),i=jQuery(this).attr("name"),p=gfRepeater_getInputValue(r),s={};i&&(-1==jQuery.inArray(i,D)&&D.push(i),e="[]"==i.slice(-2)?i.slice(0,i.length-2):i,q.prePopulate&&("checkbox"==x||"radio"==x?s=q.prePopulate:q.prePopulate[e.split("_")[1]]&&(s=q.prePopulate[e.split("_")[1]]),s&&jQuery.each(s,function(e,r){e>u&&(u=Number(e))}))),S[P]={element:r,id:t,name:i,defaultValue:p,prePopulate:s},gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+n+" - Child #"+o+" - Input Found: "+t)}),l[o]={element:L,id:N,idNum:V,inputs:S,inputCount:P,required:F,type:x,inputMask:w,conditionalLogic:A,parentSection:E},f[V]=D}}}),gfRepeater_debug&&console.log("Form #"+a+" - Repeaters Found: "+n),0!==p?!1:t?(gfRepeater_repeaters[a]=t,!0):void 0});return e?!0:!1}function gfRepeater_setRepeaterChildAttrs(e,r,t,a){var i=gfRepeater_repeaters[e][r];if(!a)var a=i.data.repeatCount+1;var n=jQuery(t).attr("id").split("-")[0],p=gfRepeater_getIndex(i.children,"id",n),o=jQuery("#gform_wrapper_"+e).hasClass("gform_validation_error");if(p){var u=!1,s=i.children[p],d=s.required,l=s.type,f=s.inputCount,c=s.inputMask,g=i.data.tabIndex,_=n+"-"+r+"-"+a;jQuery(t).attr("id",_).attr("data-repeater-parentId",r).attr("data-repeater-repeatId",a).attr("data-repeater-childId",p).addClass("gf_repeater_child_field"),gfRepeater_replaceShortcodes(t),gfRepeater_doShortcode(t,"count",a),gfRepeater_doShortcode(t,"buttons",i.controllers.add.parent().clone()),gfRepeater_doShortcode(t,"add",i.controllers.add.clone()),gfRepeater_doShortcode(t,"remove",i.controllers.remove.clone());var h="gfRepeater_unrepeatRepeater("+e+","+r+","+a+");";if(jQuery(t).find(".gf_repeater_remove").attr({onclick:h,onkeypress:h}).show(),jQuery(t).find(".gf_repeater_add").show(),jQuery.each(i.children[p].inputs,function(e,n){var p=this.id,s=this.name,_="";if("radio"==l)var h=gfRepeater_findElementByNameOrId(t,null,p);else var h=gfRepeater_findElementByNameOrId(t,s,p);if(h.attr("data-repeater-inputId",e),p){var R=p+"-"+r+"-"+a;jQuery(h).attr("id",R),jQuery(t).find("label[for^='"+p+"']").attr("for",R)}if(s){if("[]"==s.slice(-2))var y=s.slice(0,s.length-2)+"-"+r+"-"+a+"[]";else var y=s+"-"+r+"-"+a;jQuery(h).attr("name",y).attr("tabindex",g)}if(c&&jQuery(h).mask(c),this.prePopulate[a]?_=this.prePopulate[a]:this.prePopulate[0]&&(_=this.prePopulate[0]),_&&(("checkbox"==l||"radio"==l)&&(prePopulateValues=_.split(","),_=-1!==jQuery.inArray(e,prePopulateValues)?!0:!1),gfRepeater_setInputValue(h,_)),window.gformInitDatepicker&&"date"==l&&2==f&&1==e&&jQuery(h).removeClass("hasDatepicker").datepicker("destroy").siblings(".ui-datepicker-trigger").remove(),gfRepeater_submitted&&o){if(y){var m=jQuery.captures(y);m&&gfRepeater_setInputValue(h,m)}if(d){if(y){var v=y.replace(".","_").split(/(_|-)/);if("name"==l&&-1==jQuery.inArray(v[4],["3","6"]))return!0;if("address"==l&&-1!==jQuery.inArray(v[4],["2"]))return!0}var j=gfRepeater_getInputValue(h);!j&&a<=i.data.prevRepeatCount&&(u=!0)}}}),d){var R=t.children(".gfield_label");t.addClass("gfield_contains_required"),R.has(".gfield_required").length||R.append('<span class="gfield_required">*</span>'),gfRepeater_submitted&&o&&(u?(t.addClass("gfield_error"),t.has(".validation_message").length||t.append('<div class="gfield_description validation_message">This field is required.</div>')):t.removeClass("gfield_error").find(".validation_message").remove())}}}function gfRepeater_resetRepeaterChildrenAttrs(e,r){var t=gfRepeater_select(e,r),a=0;jQuery(t).each(function(){1==jQuery(this).attr("data-repeater-childid")&&(a+=1),jQuery(this).attr("data-repeater-repeatid")!==a&&gfRepeater_setRepeaterChildAttrs(e,r,jQuery(this),a)})}function gfRepeater_conditionalLogic_set(e,r,t,a){gfRepeater_conditionalLogic_do(e,r,t,a);var i=gfRepeater_repeaters[e][r],n=i.children[t],p=n.conditionalLogic;jQuery.each(p.rules,function(n,p){var o=p.fieldId,u=gfRepeater_getIndex(i.children,"idNum",o);if(u!==!1)var s=gfRepeater_select(e,r,a,u,"*");else{var s=jQuery("#field_"+e+"_"+o+" :input");a=null}jQuery.each(s,function(i,n){jQuery(this).bind("propertychange change click keyup input paste",function(){gfRepeater_conditionalLogic_do(e,r,t,a)})})})}function gfRepeater_conditionalLogic_setAll(e,r,t){var a=gfRepeater_repeaters[e][r];jQuery.each(a.children,function(a,i){this.conditionalLogic&&gfRepeater_conditionalLogic_set(e,r,a,t)})}function gfRepeater_conditionalLogic_do(e,r,t,a){var i=gfRepeater_repeaters[e][r],n=i.children[t],p=n.conditionalLogic,o=[t],u=[],s=!1,d=!1;if(jQuery.each(p.rules,function(t,n){var p=!1,o=n.fieldId,s=gfRepeater_getIndex(i.children,"idNum",o);if(s!==!1){var d=i.children[s],l=gfRepeater_select(e,r,a,s);if("checkbox"==d.type||"radio"==d.type)var f=gfRepeater_getChoiceValue(l),c=!0;else var g=gfRepeater_select(e,r,a,s,1),f=gfRepeater_getInputValue(g),c=!1}else{var _=jQuery("#field_"+e+"_"+o),h=_.find(":input").first();if(h.is(":checkbox, :radio"))var f=gfRepeater_getChoiceValue(_),c=!0;else var f=gfRepeater_getInputValue(h),c=!1}c&&(f=-1!==jQuery.inArray(n.value,f)?n.value:!1),p=gf_matches_operation(f,n.value,n.operator),u.push(p)}),"all"==p.logicType?-1==jQuery.inArray(!1,u)&&(s=!0):-1!==jQuery.inArray(!0,u)&&(s=!0),(s&&"show"!==p.actionType||!s&&"show"==p.actionType)&&(d=!0),"section"==n.type){var l=gfRepeater_getIndex(i.children,"parentSection",t,!0);l!==!1&&(o=o.concat(l))}jQuery.each(o,function(t,n){var p=i.children[n],o=p.conditionalLogic,u=gfRepeater_select(e,r,a,n),s=a;if(null==s&&(s="all"),u.length)if(d)u.hide(),o&&-1==jQuery.inArray(s,o.skip)&&o.skip.push(s);else if(u.show(),o&&-1!==jQuery.inArray(s,o.skip)){var l=o.skip.indexOf(s);o.skip.splice(l,1)}}),gfRepeater_updateDataElement(e,r)}function gfRepeater_doShortcode(e,r,t){e.find(".gfRepeater-shortcode-"+r).each(function(){jQuery(this).html(t)})}function gfRepeater_replaceShortcodes(e){var r=["count","buttons","add","remove"];jQuery.each(r,function(r,t){var a=e.html();e.html(a.replace("[gfRepeater-"+t+"]",'<span class="gfRepeater-shortcode-'+t+'"></span>'))})}function gfRepeater_repeatRepeater(e,r){var t=gfRepeater_repeaters[e][r],a=t.data.repeatCount+1;if(!(t.settings.max&&t.data.repeatCount>=t.settings.max)){jQuery(t.controllers.start).parents("form").trigger("gform_repeater_before_repeat",[r,a]);var i=gfRepeater_select(e,r).last();jQuery.each(t.children,function(t,a){var n=jQuery(this.element).clone();gfRepeater_resetInputs(e,r,t,n),gfRepeater_setRepeaterChildAttrs(e,r,n),n.insertAfter(i),i=n}),gfRepeater_conditionalLogic_setAll(e,r,a),t.data.repeatCount+=1,gfRepeater_updateDataElement(e,r),gfRepeater_updateRepeaterControls(e,r),window.gformInitDatepicker&&gformInitDatepicker(),jQuery(t.controllers.start).parents("form").trigger("gform_repeater_after_repeat",[r,a]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+r+" - repeated")}}function gfRepeater_unrepeatRepeater(e,r,t){var a=gfRepeater_repeaters[e][r];if(!(a.data.repeatCount<=a.settings.min)){if(!t)var t=a.data.repeatCount;jQuery(a.controllers.start).parents("form").trigger("gform_repeater_before_unrepeat",[r,t]),jQuery.each(a.children,function(a,i){gfRepeater_select(e,r,t,a).remove()}),a.data.repeatCount-=1,gfRepeater_updateDataElement(e,r),gfRepeater_updateRepeaterControls(e,r),t!==a.data.repeatCount+1&&gfRepeater_resetRepeaterChildrenAttrs(e,r),jQuery(a.controllers.start).parents("form").trigger("gform_repeater_after_unrepeat",[r,t]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+r+" - Repeat #"+t+" - unrepeated")}}function gfRepeater_repeatRepeaterTimes(e,r,t){if(!t)var t=1;for(i=0;i<t;i++)gfRepeater_repeatRepeater(e,r)}function gfRepeater_unrepeatRepeaterTimes(e,r,t){if(!t)var t=1;for(i=0;i<t;i++)gfRepeater_unrepeatRepeater(e,r)}function gfRepeater_setRepeater(e,r,t){var a=gfRepeater_repeaters[e][r],i=a.data.repeatCount;if(t!=i)if(t>i){var n=t-i;gfRepeater_repeatRepeaterTimes(e,r,n)}else if(i>t){var n=i-t;gfRepeater_unrepeatRepeaterTimes(e,r,n)}}function gfRepeater_updateRepeaterControls(e,r){var t=gfRepeater_repeaters[e][r];t.settings.max&&(t.data.repeatCount>=t.settings.max?jQuery(t.controllers.add).hide():jQuery(t.controllers.add).show()),t.data.repeatCount<=t.settings.min?jQuery(t.controllers.remove).hide():jQuery(t.controllers.remove).show()}function gfRepeater_resetInputs(e,r,t,a){var i=gfRepeater_repeaters[e][r];jQuery.each(i.children[t].inputs,function(e,r){var t=this.id,i=this.name,n=this.defaultValue,p=gfRepeater_findElementByNameOrId(a,i,t);p&&gfRepeater_setInputValue(p,n)})}function gfRepeater_select(e,r,t,a,i){var n="div#gform_wrapper_"+e+">form#gform_"+e;return(r||t||a||i)&&(n+=">.gform_body .gform_fields>.gfield.gf_repeater_child_field"),r&&(n+="[data-repeater-parentid="+r+"]"),t&&(n+="[data-repeater-repeatid="+t+"]"),a&&(n+="[data-repeater-childid="+a+"]"),i&&(n+="*"==i?" [data-repeater-inputid]":" [data-repeater-inputid="+i+"]"),jQuery(n)}function gfRepeater_findElementByNameOrId(e,r,t){if(r)var a=jQuery(e).find("[name^='"+r+"']");if(!a&&t)var a=jQuery(e).find("[id^='"+t+"']");return a?a:!1}function gfRepeater_getIndex(e,r,t,a){var i=[];return jQuery.each(e,function(e,n){return n[r]!=t||(i.push(e),a)?void 0:!1}),i.length?a?i:i[0]:!1}function gfRepeater_getChoiceValue(e){var r=[];return jQuery(e).find(":checkbox, :radio").each(function(){if(1==jQuery(this).prop("checked")){var e=(this.id,jQuery(this).siblings("label").first().text());r.push(e)}}),r}function gfRepeater_getInputValue(e){return e.is(":checkbox, :radio")?1==e.prop("checked")?!0:!1:e.val()}function gfRepeater_setInputValue(e,r){e.is(":checkbox, :radio")?r?e.prop("checked",!0):e.prop("checked",!1):e.val(r)}function gfRepeater_updateDataElement(e,r){var t=gfRepeater_repeaters[e][r],a=jQuery(t.controllers.data),i=jQuery(a).val();i&&(i=JSON.parse(i)),i.repeaterId=r,i.repeatCount=t.data.repeatCount,jQuery.each(i.children,function(e,r){Array.isArray(this)&&(i.children[e]={});var a=t.data.inputData[e];a.length&&(i.children[e].inputs=a);var n=gfRepeater_getIndex(t.children,"idNum",e);i.children[e].conditionalLogic=t.children[n].conditionalLogic}),i=JSON.stringify(i),jQuery(a).val(i)}function gfRepeater_start(){jQuery.each(gfRepeater_repeaters,function(e,r){var t=e,a=gfRepeater_select(t);jQuery.each(r,function(e,r){var a=e,i=gfRepeater_repeaters[t][a],n=i.settings.start,p=i.data.paremCount;i.controllers.data.attr("data-required")&&i.controllers.start.addClass("gfield_contains_required"),jQuery.each(i.children,function(e,r){gfRepeater_setRepeaterChildAttrs(t,a,jQuery(i.children[e].element),1),this.conditionalLogic&&gfRepeater_conditionalLogic_set(t,a,e,1)}),gfRepeater_submitted?n=i.data.prevRepeatCount:p>n&&(n=p),gfRepeater_setRepeater(t,a,n),gfRepeater_updateRepeaterControls(t,a),gfRepeater_updateDataElement(t,a)}),jQuery(a).trigger("gform_repeater_init_done")}),window.gformInitDatepicker&&gformInitDatepicker()}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_submitted=!1;jQuery(document).bind("gform_post_render",function(){gfRepeater_getRepeaters()?(gfRepeater_start(),jQuery(window).trigger("gform_repeater_init_done")):console.log("There was an error with one of your repeaters. This is usually caused by forgetting to include a repeater-end field or by trying to nest repeaters.")}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&console.log(jQuery.captures())});